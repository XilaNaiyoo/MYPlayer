# 项目管理与开发指南

## 1. 版本控制最佳实践 (Version Control)

您提到的“目前版本比较混乱”是个人开发早期的常见情况。成熟的项目通常遵循 **语义化版本 (SemVer)** 规范。

### 1.1 语义化版本规范 (X.Y.Z)
格式：`主版本号.次版本号.修订号` (Major.Minor.Patch)

- **主版本号 (Major)**: 当你做了不兼容的 API 修改或重大重构时（如从 v1.0 升至 v2.0）。
- **次版本号 (Minor)**: 当你做了向下兼容的功能性新增时（如新增“歌词视听”模块，v1.6 -> v1.7）。
- **修订号 (Patch)**: 当你做了向下兼容的问题修正时（如修复一个 Bug，v1.6.4 -> v1.6.5）。

### 1.2 建议的迁移路径
鉴于目前是 `1.6.4` 且处于“开发阶段”，建议：
1.  **里程碑重置**：如果软件尚未正式对外公开发布（Release），可以考虑将版本号视为 `0.x.y` (如 0.6.4)，这代表“初始开发阶段，一切可能随时变动”。
2.  **或者继续沿用**：如果想保留 `1.x`，则未来的 `1.7.0` 应该包含显著的新功能（如播放列表管理），而 `1.6.5` 仅用于修复 Bug。

### 1.3 Git 分支策略
不要直接在 `main` (或 `master`) 分支上改代码。
- **main**: 永远保持是一个“稳定、可随时发布”的状态。
- **develop**: (可选) 用于日常开发的集成分支。
- **feature/xxx**: 开发新功能时新建的分支 (例如 `feature/lyrics-support`)。开发完合并回 `main` 或 `develop`。

---

## 2. 如何发布开发版 EXE (Release Process)

您想发布“开发阶段exe”，在 Flutter Windows 中非常简单。

### 2.1 构建命令
在终端运行以下命令：
```bash
flutter build windows
```
*注意：这将构建 Release 版本（性能更优，无调试工具干扰）。如果需要 Debug 版供测试，使用 `flutter build windows --debug`，但通常发给别人用都是 Release 版。*

### 2.2 产物位置
构建完成后，文件位于：
`build\windows\runner\Release\`

### 2.3 如何打包
该目录下的文件结构通常如下：
```
Release/
  ├── flutter_windows.dll
  ├── my_music_player.exe  <-- 启动程序
  ├── data/                <-- 资源文件
  └── ... (其他dll)
```
**重要**：您**不能**只把 `.exe` 发给别人。必须把整个 `Release` 文件夹打包。

**简单做法 (Zip)**:
1.  重命名 `Release` 文件夹为 `MYMP_v1.6.4_Dev`。
2.  右键 -> 发送到 -> 压缩(zipped)文件夹。
3.  分享这个 `.zip` 包即可。

**进阶做法 (Installer)**:
以后可以使用 **Inno Setup** 将这些文件打包成一个安装包 (`setup.exe`)，显得更专业。

---

## 3. 架构模式简介 (MVVM + Repository)

在 README 中提到的技术名词解释：

- **MVVM (Model-View-ViewModel)**:
    - 一种UI设计模式，目的是把**界面 (View)** 和**数据逻辑 (Model)** 分开。
    - **View**: 您看到的按钮、列表。
    - **ViewModel**: 处理点击事件、转换数据供 View 显示（比如把“毫秒”转成“03:45”）。
    - **Model**: 原始数据（如歌曲文件路径、数据库记录）。
    
- **Repository Pattern (仓库模式)**:
    - 它的作用是**数据的大管家**。
    - 界面层不需要知道数据是来自 `Isar` 数据库、还是本地 `.mp3` 文件、还是网络。它只要找 Repository 要数据就行。
    - 好处：以后如果想换数据库，或者加网络功能，只需要改 Repository，不需要改界面代码。
